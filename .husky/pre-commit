#!/usr/bin/env sh

# Source Husky script
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ—ï¸ğŸ‘· Styling, testing, and building your project before committing'

# Run Prettier to format code
echo 'ğŸš€ Running Prettier to format code...'
if bun run prettier; then
    echo 'ğŸŒˆâœ¨ Code styling with Prettier succeeded! âœ¨ğŸŒˆ'
    
    # Add formatted files to the staging area
    git add .
else
    echo 'âŒ Prettier encountered an error during formatting. Check the console for details.'
    exit 1
fi

# Build project
if ! bun run build; then
    echo 'âŒğŸ‘·ğŸ”¨âŒ Better call Bob... Because your build failed âŒğŸ‘·ğŸ”¨âŒ
            Next build failed: View the errors above to see why.'
    exit 1
fi

# If everything passes, commit
echo 'âœ…âœ…âœ…âœ… You win this time... I am committing this now. âœ…âœ…âœ…âœ…'
